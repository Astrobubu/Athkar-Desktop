<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>الأذكار</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="widget">
        <!-- Header -->
        <div class="header" id="dragHandle" data-tauri-drag-region>
            <button class="btn-close" id="closeBtn">×</button>
            <button class="btn-tab active" data-category="morning">صباح</button>
            <button class="btn-tab" data-category="evening">مساء</button>
            <button class="btn-icon" id="settingsBtn" title="الإعدادات">
                <i data-feather="settings"></i>
            </button>
        </div>
        
        <!-- Main View -->
        <div class="content" id="mainView">
            <div class="text-wrapper">
                <p class="text" id="athkarText">...</p>
                <button class="btn-info" id="infoBtn">
                    <i data-feather="info"></i>
                </button>
                <div class="info-tooltip" id="infoTooltip"></div>
            </div>
            
            <div class="counter">
                <span id="currentCount">0</span>/<span id="totalCount">0</span>
            </div>
            
            <button class="btn-count" id="countBtn">تسبيح</button>
            
            <div class="nav">
                <button class="btn-nav" id="nextBtn">‹</button>
                <div class="progress">
                    <span id="athkarProgress">0</span>/<span id="athkarTotal">0</span>
                </div>
                <button class="btn-nav" id="prevBtn">›</button>
            </div>
        </div>

        <!-- Update Notification -->
        <div class="update-notification" id="updateNotification" style="display: none;">
            <div class="update-info">
                <span class="update-icon"><i data-feather="download" width="16" height="16"></i></span>
                <span class="update-text" id="updateText">تحديث جديد متاح!</span>
            </div>
            <div class="update-actions">
                <button class="btn-update-install" id="installUpdateBtn">تحديث الآن</button>
                <button class="btn-update-dismiss" id="dismissUpdateBtn">لاحقاً</button>
            </div>
        </div>

        <!-- Settings View -->
        <div class="settings-view" id="settingsView" style="display: none;">
            <div class="settings-header">
                <h3>الإعدادات</h3>
                <button class="btn-back" id="backFromSettings">
                    <i data-feather="arrow-right"></i>
                </button>
            </div>
            
            <div class="settings-content">
                <!-- Appearance Section -->
                <div class="settings-section">
                    <h4 class="section-title">المظهر</h4>
                    <div class="setting-item">
                        <div class="setting-label">
                            <label>حجم الخط</label>
                        </div>
                        <div class="setting-control">
                            <input type="range" id="fontSizeSlider" class="slider" min="14" max="32" value="22">
                            <span class="value-display" id="fontSizeValue">22px</span>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <label>الوضع الداكن</label>
                            <span class="setting-description">تفعيل الثيم الداكن</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Features Section -->
                <div class="settings-section">
                    <h4 class="section-title">الوظائف</h4>
                    <div class="setting-item">
                        <div class="setting-label">
                            <label>تفعيل الصوت</label>
                            <span class="setting-description">تشغيل صوت عند كل تسبيحة</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="playSoundToggle" checked>
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Data Section -->
                <div class="settings-section">
                    <h4 class="section-title">البيانات</h4>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <label>تعديل الأذكار</label>
                            <span class="setting-description">إضافة أو تعديل الأذكار</span>
                        </div>
                        <button class="btn btn-secondary" id="openEditorBtn">
                            <i data-feather="edit-2" width="14" height="14"></i>
                            تعديل
                        </button>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <label>إعادة التعيين</label>
                            <span class="setting-description">حذف التقدم والأذكار المخصصة</span>
                        </div>
                        <button class="btn btn-destructive" id="resetAllBtn">
                            <i data-feather="refresh-cw" width="14" height="14"></i>
                            إعادة تعيين
                        </button>
                    </div>
                </div>

                <!-- Updates Section -->
                <div class="settings-section">
                    <h4 class="section-title">التحديثات</h4>
                    <div class="setting-item">
                        <div class="setting-label">
                            <label>التحقق من التحديثات</label>
                            <span class="setting-description" id="versionText">الإصدار: 1.1.1</span>
                        </div>
                        <button class="btn btn-secondary" id="checkUpdateBtn">
                            <i data-feather="refresh-cw" width="14" height="14"></i>
                            تحقق
                        </button>
                    </div>
                    <div class="update-status" id="updateStatus" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- Editor View -->
        <div class="editor-view" id="editorView" style="display: none;">
            <div class="editor-header">
                <button class="btn-back" id="backFromEditor">
                    <i data-feather="arrow-right"></i>
                </button>
                <h3>تعديل أذكار <span id="editorCategory">الصباح</span></h3>
            </div>
            
            <div class="editor-content">
                <div class="athkar-list" id="athkarList"></div>
            </div>
            
            <div class="editor-footer">
                <button class="btn btn-primary" id="addAthkarBtn">
                    <i data-feather="plus" width="16" height="16"></i>
                    إضافة ذكر جديد
                </button>
            </div>
        </div>

        <!-- Edit Athkar Modal -->
        <div class="edit-modal" id="editModal" style="display: none;">
            <div class="edit-modal-content">
                <h4 id="editModalTitle">تعديل الذكر</h4>
                <textarea id="editText" placeholder="نص الذكر..." rows="4"></textarea>
                <div class="input-row">
                    <label>العدد:</label>
                    <input type="number" id="editCount" placeholder="1" min="1" value="1">
                </div>
                <input type="text" id="editNote" placeholder="ملاحظة/فضل (اختياري)">
                <div class="edit-modal-actions">
                    <button class="btn btn-secondary" id="cancelEditBtn">إلغاء</button>
                    <button class="btn btn-destructive" id="deleteAthkarBtn" style="display: none;">حذف</button>
                    <button class="btn btn-primary" id="saveAthkarBtn">حفظ</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        feather.replace();
    </script>
    <script src="main.js"></script>
</body>
</html>
